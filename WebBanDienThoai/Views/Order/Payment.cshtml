@{
    ViewBag.Title = "Thanh toán";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2 style="background:#FFD600;padding:12px;border-radius:8px;">Thanh toán</h2>

<div style="width:60%;margin:20px auto;background:#fff;padding:20px;border-radius:10px;font-family:Arial;">
    <h4>Thông tin giao hàng</h4>
    <div id="shippingInfo" style="background:#fff8cc;padding:10px;border-radius:6px;margin-bottom:15px;"></div>

    <form id="formPay">
        <label><input type="radio" name="pay" value="COD" checked /> Thanh toán khi nhận hàng</label><br />
        <label><input type="radio" name="pay" value="Chuyển khoản" /> Chuyển khoản ngân hàng</label><br />
        <label><input type="radio" name="pay" value="Thẻ" /> Thẻ tín dụng / ghi nợ</label><br />

        <div style="margin-top:15px;">
            <button type="button" class="btn btn-secondary" onclick="location.href='/Order/DeliveryAddress'">Quay lại</button>
            <button type="submit" class="btn btn-warning" style="background:#FFD600;">Xác nhận</button>
        </div>
    </form>
</div>

@section Scripts {
    <script>
    let s = JSON.parse(localStorage.getItem("shipping") || "{}");
        document.getElementById("shippingInfo").innerHTML =
            `<b>${s.name || ""}</b><br>${s.phone || ""}<br>${s.address || ""}, ${s.district || ""}, ${s.city || ""}`;

        document.getElementById("formPay").onsubmit = function (e) {
            e.preventDefault();
            let method = document.querySelector("input[name='pay']:checked").value;
            localStorage.setItem("payment", method);
            window.location = "/Order/OrderConfirmed";
        }</script>
}
