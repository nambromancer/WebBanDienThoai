<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - Thế Giới Di Động</title>
    @Styles.Render("~/Content/css")
    <link href="~/Content/header-style.css" rel="stylesheet" />
    <link href="~/Content/footer-style.css" rel="stylesheet" />
    <link href="~/Content/modal-tgdd.css" rel="stylesheet" />

    @Scripts.Render("~/bundles/modernizr")
</head>
<body>
    <!-- Header Section - Thay thế navbar cũ -->
    <header class="main-header">
        <div class="header-container">
            <!-- Logo -->
            <div class="logo-section">
                <a href="@Url.Action("Index", "Home")" class="logo-link">
                    <div class="logo-circle">
                        <span class="logo-icon">📱</span>
                    </div>
                    <span class="logo-text">thegioididong</span>
                </a>
            </div>

            <!-- Search Bar -->
            <div class="search-section">
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Laptop nhập học...">
                    <button class="search-btn">
                        <span class="search-icon">🔍</span>
                    </button>
                </div>
            </div>

            <!-- User Actions -->
            <div class="user-actions">
                <!-- Make sure this is the button you click -->
                <a id="loginLink"
                   href="javascript:void(0)"
                   class="user-login"
                   data-toggle="modal" data-target="#loginModal"
                   data-bs-toggle="modal" data-bs-target="#loginModal">
                    <span class="user-icon">👤</span>
                    <span>Đăng nhập</span>
                </a>
                <a href="#" class="cart-link">
                    <span class="cart-icon">🛒</span>
                    <span>Giỏ hàng</span>
                </a>
                <div class="location">
                    <span class="location-icon">📍</span>
                    <span>Hồ Chí Minh</span>
                </div>
            </div>
        </div>

        <!-- Navigation Menu -->
        <nav class="main-navigation">
            <div class="nav-container">
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="@Url.Action("Index", "Home")" class="nav-link">
                            <span class="nav-icon">📱</span>
                            Điện thoại
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <span class="nav-icon">💻</span>
                            Laptop
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <span class="nav-icon">🔌</span>
                            Phụ kiện
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <span class="nav-icon">⌚</span>
                            Smartwatch
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <span class="nav-icon">📱</span>
                            Tablet
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <span class="nav-icon">♻️</span>
                            Máy cũ, Thu cũ
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <span class="nav-icon">📶</span>
                            Sim, thẻ cào
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Login Modal -->
    <div class="modal fade tgdd-modal" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
                <!-- Keep Bootstrap 'close' class and data-* so BS3/4/5 can hook it -->
                <button type="button"
                        class="close tgdd-close"
                        data-dismiss="modal"
                        data-bs-dismiss="modal"
                        aria-label="Close">
                    x
                </button>
                <div class="modal-body text-center">
                    <h3 id="loginModalLabel" class="tgdd-title">thegioididong</h3>
                    <p class="tgdd-desc">
                        Vui lòng đăng nhập tài khoản thegioididong để xem ưu đãi và thanh toán dễ dàng hơn.
                    </p>
                    <div class="tgdd-actions">
                        <a href="@Url.Action("Register", "Account")" class="btn btn-outline-tgdd">Đăng ký</a>
                        <a href="@Url.Action("Login", "Account")" class="btn btn-tgdd">Đăng nhập</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container body-content">
        @RenderBody()
        <hr />
    </div>
    <footer>
        <div class="footer-top">
            <div class="footer-container">
                <div class="footer-columns">
                    <div class="footer-col">
                        <h4>Tổng đài hỗ trợ</h4>
                        <ul>
                            <li>Gọi mua: <a href="tel:18001060">1800 1060</a> (7:30 - 22:00)</li>
                            <li>Khiếu nại: <a href="tel:18001062">1800 1062</a> (8:00 - 21:30)</li>
                            <li>Bảo hành: <a href="tel:18001064">1800 1064</a> (8:00 - 21:00)</li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Về công ty</h4>
                        <ul>
                            <li><a href="#">Giới thiệu công ty (MWG.vn)</a></li>
                            <li><a href="#">Tuyển dụng</a></li>
                            <li><a href="#">Gửi góp ý, khiếu nại</a></li>
                            <li><a href="#">Tìm siêu thị (gần bạn)</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Thông tin khác</h4>
                        <ul>
                            <li><a href="#">Trung tâm bảo hành</a></li>
                            <li><a href="#">Chính sách bảo hành</a></li>
                            <li><a href="#">Hướng dẫn mua hàng</a></li>
                            <li><a href="#">Bảo mật và điều khoản</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Website cùng tập đoàn</h4>
                        <div class="partner-badges">
                            <a href="#" class="badge">TopZone</a>
                            <a href="#" class="badge">Điện máy XANH</a>
                            <a href="#" class="badge">Bách hóa XANH</a>
                            <a href="#" class="badge">Nhà thuốc An Khang</a>
                        </div>
                        <div class="socials">
                            <a href="#" class="social">Facebook</a>
                            <a href="#" class="social">YouTube</a>
                            <a href="#" class="social">Zalo</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="footer-container">
                <p>© @DateTime.Now.Year - Thế Giới Di Động. Nội dung mang tính minh họa cho bài thực hành.</p>
            </div>
        </div>
    </footer>
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @RenderSection("scripts", required: false)

    <!-- Open/Close fallbacks that work with Bootstrap 3/4/5 -->
<script>
    (function () {
        function showLoginModal(e) {
            if (e) e.preventDefault();
            var modalEl = document.getElementById('loginModal');
            if (!modalEl) return;

            if (window.jQuery && typeof jQuery.fn.modal === 'function') {
                jQuery(modalEl).modal('show');
                return;
            }
            if (window.bootstrap && typeof bootstrap.Modal === 'function') {
                (bootstrap.Modal.getInstance(modalEl) || new bootstrap.Modal(modalEl)).show();
                return;
            }
            console.warn('Bootstrap JS not loaded.');
        }

        function hideLoginModal(e) {
            if (e) e.preventDefault();
            var modalEl = document.getElementById('loginModal');
            if (!modalEl) return;

            if (window.jQuery && typeof jQuery.fn.modal === 'function') {
                jQuery(modalEl).modal('hide');
                return;
            }
            if (window.bootstrap && typeof bootstrap.Modal === 'function') {
                (bootstrap.Modal.getInstance(modalEl) || new bootstrap.Modal(modalEl)).hide();
                return;
            }
            // Hard fallback
            modalEl.classList.remove('in', 'show');
            modalEl.style.display = 'none';
            document.body.classList.remove('modal-open');
            var backdrop = document.querySelector('.modal-backdrop');
            if (backdrop) backdrop.parentNode.removeChild(backdrop);
        }

        // Open handler (works even if data attributes don't)
        document.addEventListener('click', function (ev) {
            if (ev.target.closest && ev.target.closest('#loginLink')) {
                showLoginModal(ev);
            }
        });

        // Close handler with jQuery delegation if available, else vanilla
        if (window.jQuery) {
            jQuery(document).on('click', '#loginModal .tgdd-close', hideLoginModal);
        } else {
            document.addEventListener('click', function (ev) {
                if (ev.target.closest && ev.target.closest('#loginModal .tgdd-close')) {
                    hideLoginModal(ev);
                }
            });
        }
    })();
</script>
</body>
</html>