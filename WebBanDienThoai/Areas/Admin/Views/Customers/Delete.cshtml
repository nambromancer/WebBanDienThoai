@model WebBanDienThoai.Models.Customer

@{
    ViewBag.Title = "Xóa khách hàng";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<h2 class="bg-danger" style="padding: 15px; color: white; border-radius: 5px;">
    <i class="fas fa-trash-alt"></i> XÓA KHÁCH HÀNG
</h2>

<div class="alert alert-danger">
    <h4><i class="fas fa-exclamation-triangle"></i> Cảnh báo!</h4>
    <p>Bạn có chắc chắn muốn xóa khách hàng này không? Hành động này không thể hoàn tác.</p>
</div>

<div class="card mb-4">
    <div class="card-header bg-light">
        <h4 class="mb-0"><i class="fas fa-info-circle"></i> Thông tin khách hàng</h4>
    </div>
    <div class="card-body">
        @Html.Partial("PartialView_CustomerInfo", Model)
    </div>
</div>

@if (Model.Orders != null && Model.Orders.Any())
{
    <div class="alert alert-warning">
        <h5><i class="fas fa-exclamation-circle"></i> Không thể xóa!</h5>
        <p class="mb-0">
            Khách hàng này có <strong>@Model.Orders.Count đơn hàng</strong> trong hệ thống.
            Vui lòng xóa các đơn hàng trước khi xóa khách hàng.
        </p>
    </div>

    <div class="form-group mt-4">
        @Html.ActionLink("Quay lại danh sách", "Index", null, new { @class = "btn btn-secondary" })
        @Html.ActionLink("Xem chi tiết", "Details", new { id = Model.CustomerID }, new { @class = "btn btn-info" })
    </div>
}
else
{
    using (Html.BeginForm("Delete", "Customers", FormMethod.Post))
    {
        @Html.AntiForgeryToken()
        @Html.HiddenFor(m => m.CustomerID)

        <div class="form-group mt-4">
            <button type="submit" class="btn btn-danger" onclick="return confirm('Bạn có chắc chắn muốn xóa khách hàng này không?')">
                <i class="fas fa-trash"></i> Xác nhận xóa
            </button>
            @Html.ActionLink("Hủy bỏ", "Index", null, new { @class = "btn btn-secondary" })
        </div>
    }
}