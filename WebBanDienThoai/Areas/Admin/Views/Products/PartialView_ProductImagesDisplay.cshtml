
@model WebBanDienThoai.Models.Product

@if (Model.ProductImages != null && Model.ProductImages.Any())
{
    <div style="margin-top: 20px;">
        <h4 style="margin-bottom: 20px;">
            <i class="fas fa-images"></i> Thư viện ảnh sản phẩm
        </h4>

        <div class="row">
            @foreach (var image in Model.ProductImages.OrderBy(i => i.DisplayOrder ?? int.MaxValue))
            {
                <div class="col-md-3 col-sm-4 col-xs-6" style="margin-bottom: 15px;">
                    <div class="thumbnail" style="position: relative; border: 2px solid #ddd; border-radius: 5px; padding: 5px;">
                        @if (image.IsMainImage == true)
                        {
                            <span class="badge" style="position: absolute; top: 10px; right: 10px; background-color: #28a745; z-index: 10;">
                                <i class="fas fa-star"></i> Ảnh chính
                            </span>
                        }
                        <img src="@Url.Content(image.ImageURL)"
                             alt="Product Image"
                             style="width: 100%; height: 200px; object-fit: contain; cursor: pointer;"
                             onclick="showImageModal('@Url.Content(image.ImageURL)')" />
                    </div>
                </div>
            }
        </div>
    </div>
}
else
{
    <div class="alert alert-info" style="margin-top: 20px;">
        <i class="fas fa-info-circle"></i>
        Sản phẩm này chưa có ảnh bổ sung.
    </div>
}

<!-- Modal để xem ảnh phóng to -->
<div class="modal fade" id="imageModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">Xem ảnh</h4>
            </div>
            <div class="modal-body text-center">
                <img id="modalImage" src="" style="max-width: 100%; max-height: 80vh; object-fit: contain;" />
            </div>
        </div>
    </div>
</div>

<script>function showImageModal(imageUrl) {
        $('#modalImage').attr('src', imageUrl);
        $('#imageModal').modal('show');
    }</script>